# StrongBox-3000-Project
This project is one I've done for my studies. It explains the fact I was in a project team of 3 classmates. The subject of this project is electronics, arithmetics and Arduino code.

# Introduction
### Context :
The famous spy agency MI7 has lived through some dark hours in recent weeks. At several times, the equipment provided in the field for their agents has been hijacked.\
In spite of secret codes and other stratagems, the hiding places are no longer secure enough and we have to and another solution must be found!\
Agent R, in charge of technological innovations, proposed to work on a prototype of safe with more efficient authentication mechanisms.\
We will therefore have to work on the development of a functional authentication system for the safe.

### Problematic :
How to create a functional system of advanced authentication for a strongBox ?

# The circuit (à revoir avec schéma complet si possible)
The strongbox security system is composed of switches, a plug zone for card, etc...\
Each agent has a card and each card have a specific combination of switches.

<p align="center">
  <img width="500" height="400" src="https://user-images.githubusercontent.com/93186642/139056362-31b20d28-7ad0-4c45-ac21-729186c349c2.png">
</p>

# First security level
### Output code for each card
In this first part of the creation of the authentification system, we had to implement the card plug zone and switches.\
Indeed, There are 16 cards, each with a different combination of combination of switches. These 16 cards are listed in 8 models.
The strongbox system that we have to realize must be able to recognize these 8 card models.
In order to create a specific code for each card we decided to make a table of 4 outputs fo each model of card.

<p align="center">
  <img width="800" height="300" src="https://user-images.githubusercontent.com/93186642/139062275-e019ba5f-26da-4a0b-95b5-47579a0f62f6.png">
</p>

### Switch combination link to card model outputs
Then, we decided to link the different switch position combination with each card model (or outputs of our table) in a truth table.

<p align="center">
  <img width="600" height="400" src="https://user-images.githubusercontent.com/93186642/139062567-685c9ce0-1fa8-47b8-b27b-c4ad557f6816.png">
</p>

### Karnaugh table and simplification of equations
We decided to establish the Karnaugh tables of each of the 4 possible outputs possible outputs. Thanks to these tables, we were able to determine an equation for each of these 4 outputs. Finally, we simplified the equations when it was possible in order to realize thethe logic circuit of the box more easily.

<p align="center">
  <img width="800" height="300" src="https://user-images.githubusercontent.com/93186642/139062810-fc66c44f-6e51-4e75-a9ef-49072fdd2699.png">
</p>

<p align="center">
  <img width="800" height="300" src="https://user-images.githubusercontent.com/93186642/139062970-30984c85-9e68-4e95-844f-e906db8ce62f.png">
</p>

### Internal logic circuit of the box
Finally, for this part, we decided to create the internal logic circuit of the safe on Logisim using the equations established for each output on the Excel using the different logic gates of the Logisim software.

<p align="center">
  <img width="400" height="800" src="https://user-images.githubusercontent.com/93186642/139063126-d898643c-afd3-4dc2-ac5a-7b321c4cd7fb.png">
</p>

### logic circuit of each card
Still on Logisim software, we decided to make the circuit of all the card we had, so that, depending on the switch combination corresponding to the card, the code code assigned to each model is output. In order to display only 0's at the output if the switch combination switch combination is not the right one, we decided to use the D flip-flops.

<p align="center">
  <img width="800" height="400" src="https://user-images.githubusercontent.com/93186642/139063522-7a9988f3-ba50-49bd-a313-124cdfb13008.png">
</p>

### comparison logic circuit
In order to compare outputs generated by cards and outputs generated by intern strongbox system and verify that they are the same, we decided to implement the compare system on Logisim software too.\
In order to realize this circuit, we have recovered the integrated circuit of the internal system of the system and the integrated circuit of one of the 16 cards, which we can change at any time, allowing us to compare the that we can change at any time, allowing us to compare the outputs for each of the agents' cards.

<p align="center">
  <img width="600" height="400" src="https://user-images.githubusercontent.com/93186642/139063838-24a30620-9d94-4f3d-80a5-6cf8e0fbe2d2.png">
</p>

# StrongBox 3000 electronic circuit
In this part of the project, we had to implement the electronic circuit of the strongbox on Tinkercad with the best values for each component such as resistors based on the following sketch.

<p align="center">
  <img width="700" height="300" src="https://user-images.githubusercontent.com/93186642/139065825-4e268371-8abe-4bc8-bef1-38ae7a8fbf6f.png">
</p>

### R5 and R6 resistor dimensioning
Firstly, we decided to calculate the value of equivalent resistor linked to each model of card.

<p align="center">
  <img width="300" height="200" src="https://user-images.githubusercontent.com/93186642/139066791-1e89a52f-7916-4b23-aa42-d5f7b74edcfa.png">
</p>

Then, using an Excel table, we calculated the output voltage according to the possible R5 resistances in the possible R5 resistances in the E24 category and the equivalent resistances of the models calculated previously calculated. In order to calculate this voltage, we performed the following calculation:

<p align="center">
  <img width="300" height="100" src="https://user-images.githubusercontent.com/93186642/139066954-cc51618c-6d34-4bf6-80b6-51b3e1de5bbe.png">
</p>

Then, to find a favorable R5 value, we performed the standard deviation between all output voltage values of each column. From this, we determined that the value of the R5 resistor should be 150Ω in the best case. Indeed, this standard deviation allows us to determine the best couple R5/R6 such that the output voltages are as far apart as possible from each other.

<p align="center">
  <img width="800" height="200" src="https://user-images.githubusercontent.com/93186642/139067189-86114a44-d8bd-407e-9650-fdfe28d853a7.png">
</p>

Finally, to determine R6, we divided the output voltage for R5 = 120Ω and Req(M8) = 32Ωbecause model 8 is the one with the lowest equivalent resistance or the highest current outgoing current, and we know that the LED current should not exceed 20mA.

<p align="center">
  <img width="300" height="100" src="https://user-images.githubusercontent.com/93186642/139067284-79f9bd83-29be-40d0-ab2a-8feddee69955.png">
</p>

However, if we round up in the E24 series, we find R6 = 180Ω\
Finally, we chose to take as values of the couple R5/R6 -> R5 = 120Ω / R6 = 180Ω.

### Calculation of output voltages
In order to calculate the output voltages for each board model, we calculated the possible voltages at R5 using the voltage divider bridge, and then subtracted the LED voltage from the output voltage possible voltages in R5 using the voltage divider bridge, then we subtracted the LED voltage voltage to find a voltage value of R6, i.e. U6 = US. However, since the LED (Red) has, according to our research, a variable voltage between 0.7 and 2.1V (0.7V being the minimum voltage), we decided to decided to calculate a frame for the value of US.

<p align="center">
  <img width="300" height="100" src="https://user-images.githubusercontent.com/93186642/139067685-5e431d4e-e38f-4731-ba32-d54fa0aeb700.png">
</p>

<p align="center">
  <img width="600" height="200" src="https://user-images.githubusercontent.com/93186642/139067745-a03cb057-9747-4614-adda-72d6f555490c.png">
</p>

Thus, the Arduino will compare the expected output voltage values according to the board models stored in its code, with the values calculated by the Arduino in real time according to the inserted according to the inserted card.

### Strongbox electronic circuit realization
For the realization of the electronic circuit of the safe, we used the software tinkercad. Therefore, we followed the therefore, we followed the specifications of the deliverable and adapted the following schematic with slide switches, LEDs, resistors and NPN transistors.

<p align="center">
  <img width="800" height="400" src="https://user-images.githubusercontent.com/93186642/139068021-0b9383ca-578d-4309-a487-fbe4561e97d8.png">
</p>

https://www.tinkercad.com/things/2dl7ObUJ6aA-copy-of-copy-of-cool-crift/editel?sharecode=e5Wu05ofnS0rEZihTp3OIjJeZhhgtQp62ieqGMbn2MM

In order to match as much as possible our voltage calculation results to those of the Arduino, we added resistors to the Base of each NPN transistor and adapted their values to added resistors to the base of each NPN transistor and adapted their values so that the output currents the output currents match those that can be calculated using the equivalent resistors and the and the supply voltage (5V).

<p align="center">
  <img width="300" height="400" src="https://user-images.githubusercontent.com/93186642/139068256-43dabbb7-c35d-4f9c-9c06-5e351f32dd5f.png">
</p>

Finally, we have created an Arduino programming code to match the switch combinations with the outputs (lit LEDs) and to interpret the output voltage. switch combinations with the outputs (lit LEDs) and to interpret the output voltage. Our output voltage results from the Arduino are as follows:

<p align="center">
  <img width="300" height="400" src="https://user-images.githubusercontent.com/93186642/139068357-adc812a6-dcd9-4779-aebe-50144da68e47.png">
</p>

Finally, we used the following calculation in the code to transform the value collected by the Arduino in the the Arduino in the Analog pin into voltage:

<p align="center">
  <img width="4300" height="100" src="https://user-images.githubusercontent.com/93186642/139068485-04c69bd4-0107-4025-a383-9ef81659b0f0.png">
</p>

As a result, we noticed a small difference between our framing values and the output voltage of the Arduino. output voltage of the Arduino. However, we think we can accept an additional 5% uncertainty gap or 0.5V due to the components, and this would make our results match those of the Arduino.

<p align="center">
  <img width="600" height="300" src="https://user-images.githubusercontent.com/93186642/139068575-8d81c156-05a5-4dc1-b462-a23584375b25.png">
</p>

# Implementation of the different authentication modes
### Description of each authentifiaction mode
* MA1 : Question/Answer Authentifiaction\
_A series of questions is asked, the answers are analyzed by voice recognition (for our prototype, the agent will simply answer by selecting the proposal number). 
our prototype, the agent will only answer by selecting the number of the proposition 
of a multiple choice question)_
* MA2 : Authentification by a code that change in the time
* MA3 : Retina scan (simulated by a message)
* MA4 : Digital scan (Simulated by a message)
* MA5 : CARD_ID\
_The user enters his agent letter (A, B, C...) and his CARD_ID. The correspondence will be checked against data stored in a table defined at the beginning of the program of the safe. This table will contain the CARD_ID for the 16 agents._\

_Each card model is associated with a security level. There are 5 security levels. Several card models can be associated with the same security level. This association is made through a table defined at the beginning of the safe program. For the realization the prototype, you will make the associations of your choice. Each security level proposes a different combination of authentication mechanisms:_\
_-secuirty level 1: MA1 + MA3_\
_-secuirty level 2: MA1 + MA4_\
_-secuirty level 3: MA2 + MA5_\
_-secuirty level 4: MA2 + MA3 + MA4_\
_-secuirty level 5: MA1 + MA2 + MA3 + MA5_\

### Data table for security
This table will help us to know what card model matches with what security level and what card ID :

<p align="center">
  <img width="600" height="300" src="https://user-images.githubusercontent.com/93186642/139072414-881b2f31-094a-4ff6-97f0-d88849fb3c5b.png">
</p>

### Authentification modes algorithms
For this part, we decided to realize the flowcharts of each authentification mode with Flowgorithm Software.
In order to realize the MA2 authentication mode, we have created 3 functions named : randbetween/encrypt/modexp.\
The randbetween function allows to perform a randomization between terminals because the between function does not allow it. Then, the functions modexp and encrypt allow to realize the calculations necessary to encrypt the code.\
Finally, we have made the main logigram by making the calls to the functions established previously. Indeed, according to the letter of the agent, the algorithm will then assign a particular value to the variable to the variable "e", then assign to the variable "c" the value of the encrypted code. Then, the variable " m " will be compared to the variable " mprime " to which was assigned the value entered in the console by the agent thanks to its decryption tool.

<p align="center">
  <img width="400" height="300" src="https://user-images.githubusercontent.com/93186642/139073042-56aa3040-a06c-4fe3-b091-75b9f28eba1d.png">
</p>

Then, we made the main function of the MA2 authentification mode and all the others (you can find them in this repository).

# Final StrongBox electronic circuit
For the realization of the electronic circuit of the safe, we had to reuse Tinkercad because of the because of the current sanitary situation that prevented us from being able to realize it physically.<Therefore, we started by gathering all the authentication steps necessary for the authentication of an authentication of an agent, then we deduced that we were going to need a new electronic circuit of card and optimized card and safe electronic circuit to be able to integrate a 7-digit digicode (for a 4-digit code). That's why we decided to realize the output comparison circuit with only one electronic circuit with only an electronic circuit and not with a code as it was before. before. In addition, we then integrated a digicode on the available digital inputs of the the Arduino. Moreover, to adapt the voltages previously listed thanks to the previous circuits, we have adapted the voltage of the resistor linked to the LED according to the model of board that was assigned to us assigned to us (model 4).

<p align="center">
  <img width="500" height="500" src="https://user-images.githubusercontent.com/93186642/139073772-05c5ccf4-dbe2-422c-b076-7aacff76ea67.png">
</p>

# Final Strongbox 3000 Arduino code
In order to realize the Arduino code, which was not an easy task, we used the Arduino software, then tested for each authentication mode and modifications made on Tinkercad. To start, we created the different functions associated to the previous deliverable, and then we linked them through the security levels.
In addition, as requested in this deliverable, for the MA2, MA5 authentication modes and security levels, we used the Arduino tables and the ASCII table to link the boxes of the link the boxes of the different tables with the input values.

You'll be able to find all the code in this repository or by clicking this link for a little test :
https://www.tinkercad.com/things/1iiocVS7bDu-smooth-borwo-jaiks/editel?sharecode=bJFcYhZILx4opDF8v2jsRSk8NWwmIKNPaIv6f0nMPs4

